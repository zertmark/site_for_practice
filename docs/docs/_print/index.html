<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="https://zertmark.github.io/site_for_practice/docs/">
<link rel="alternate" type="application/rss&#43;xml" href="https://zertmark.github.io/site_for_practice/docs/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/site_for_practice/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/site_for_practice/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/site_for_practice/favicons/android-192x192.png" sizes="192x192">

<title>Все наши отчёты/статьи | Киберполигон</title>
<meta name="description" content="В данном разделе представленны все отчёты участников проекта Киберполигон, группы 241-329">
<meta property="og:url" content="https://zertmark.github.io/site_for_practice/docs/">
  <meta property="og:site_name" content="Киберполигон">
  <meta property="og:title" content="Все наши отчёты/статьи">
  <meta property="og:description" content="В данном разделе представленны все отчёты участников проекта Киберполигон, группы 241-329">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Все наши отчёты/статьи">
  <meta itemprop="description" content="В данном разделе представленны все отчёты участников проекта Киберполигон, группы 241-329">
  <meta itemprop="wordCount" content="11">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Все наши отчёты/статьи">
  <meta name="twitter:description" content="В данном разделе представленны все отчёты участников проекта Киберполигон, группы 241-329">
<link rel="preload" href="/site_for_practice/scss/main.min.4dbf9b849efe44348d2d897fe80d87aef4a640eba82b0093df8114eef9627a06.css" as="style" integrity="sha256-Tb&#43;bhJ7&#43;RDSNLYl/6A2HrvSmQOuoKwCT34EU7vliegY=" crossorigin="anonymous">
<link href="/site_for_practice/scss/main.min.4dbf9b849efe44348d2d897fe80d87aef4a640eba82b0093df8114eef9627a06.css" rel="stylesheet" integrity="sha256-Tb&#43;bhJ7&#43;RDSNLYl/6A2HrvSmQOuoKwCT34EU7vliegY=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/site_for_practice/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Киберполигон</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/site_for_practice/about_project/"><span>О проекте</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/site_for_practice/about_us/"><span>Участники</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/site_for_practice/docs/"><span>Отчёты</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/site_for_practice/blog/"><span>Журнал</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/site_for_practice/sources/"><span>Ресурcы</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/site_for_practice/docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Все наши отчёты/статьи</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-ab37f46cd6bc335eb12fe30f2725a615">Отчёты Эльдара</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-1107bc963f38f4bf87e2de2cb8b4a41e">I2C и SPI на Arduino</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-e3a7839d75e97cb1c4618c680d19b461">Отчёты Марка</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-7a626867f5e14b572246b166f31266c5">Учимся Jinja</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-ee1e9f8b457c14056591019ec8e185df">Git и Flask</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3: <a href="#pg-6e629a5eca852332f879d818eb129c63">Знакомство с Docker Compose</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-f8918f697450c2009b75913f9e9317a5">Задачи</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<p>В данном разделе представленны все отчёты участников проекта Киберполигон, группы 241-329</p>

</div>

<!-- This section is where the user documentation for your project lives - all the
information your users need to understand and successfully use your project.

For large documentation sets we recommend adding content under the headings in
this section, though if some or all of them don’t apply to your project feel
free to remove them or add your own. You can see an example of a smaller Docsy
documentation site in the [Docsy User Guide](https://docsy.dev/docs/), which
lives in the [Docsy theme
repo](https://github.com/google/docsy/tree/master/userguide) if you'd like to
copy its docs section.

Other content such as marketing material, case studies, and community updates
should live in the [About](/about/) and [Community](/community/) pages.

Find out how to use the Docsy theme in the [Docsy User
Guide](https://docsy.dev/docs/). You can learn more about how to organize your
documentation (and how we organized this site) in [Organizing Your
Content](https://docsy.dev/docs/best-practices/organizing-content/). -->

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-ab37f46cd6bc335eb12fe30f2725a615">1 - Отчёты Эльдара</h1>
    <div class="lead">Отчёты о работе Эльдара в проекте Киберполигон (РЭА)</div>
	<h2 id="контакты">Контакты<a class="td-heading-self-link" href="#%d0%ba%d0%be%d0%bd%d1%82%d0%b0%d0%ba%d1%82%d1%8b" aria-label="Heading self-link"></a></h2>
<ul>
<li>
<p><a href="https://t.me/skeatlox">Эльдар</a></p>
</li>
<li>
<p><a href="/site_for_practice/about_us/">О нас</a></p>
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-1107bc963f38f4bf87e2de2cb8b4a41e">1.1 - I2C и SPI на Arduino</h1>
    <div class="lead">Применение протоколов I2C и SPI на платформе Arduino</div>
	<h2 id="введение">Введение<a class="td-heading-self-link" href="#%d0%b2%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5" aria-label="Heading self-link"></a></h2>


<div class="pageinfo pageinfo-primary">
<p>В данном отчете представлены результаты работы по изучению и практическому применению протоколов I2C и SPI на платформе Arduino. В рамках работы был выполнен обмен данными между двумя платами Arduino через TinkerCAD, а также проведен анализ необходимых комплектующих и пинов для киберполигона.</p>

</div>

<h2 id="1-изучение-протоколов-i2c-и-spi">1. Изучение протоколов I2C и SPI<a class="td-heading-self-link" href="#1-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb%d0%be%d0%b2-i2c-%d0%b8-spi" aria-label="Heading self-link"></a></h2>
<h3 id="11-i2c-inter-integrated-circuit">1.1 I2C (Inter-Integrated Circuit)<a class="td-heading-self-link" href="#11-i2c-inter-integrated-circuit" aria-label="Heading self-link"></a></h3>
<p>I2C — это последовательный протокол, который позволяет обмениваться данными между микроконтроллерами и различными периферийными устройствами. Основные характеристики I2C:</p>
<ul>
<li>Два провода: SDA (Serial Data Line) и SCL (Serial Clock Line).</li>
<li>Мастера и ведомые устройства: Один мастер может управлять несколькими ведомыми устройствами.</li>
<li>Адресация: Каждое ведомое устройство имеет уникальный адрес, что позволяет мастеру взаимодействовать с конкретным устройством.</li>
</ul>
<h3 id="12-spi-serial-peripheral-interface">1.2 SPI (Serial Peripheral Interface)<a class="td-heading-self-link" href="#12-spi-serial-peripheral-interface" aria-label="Heading self-link"></a></h3>
<p>SPI — это другой последовательный протокол, который обеспечивает более высокую скорость передачи данных по сравнению с I2C. Основные характеристики SPI:</p>
<ul>
<li>Четыре провода: MOSI (Master Out Slave In), MISO (Master In Slave Out), SCK (Serial Clock), и SS (Slave Select).</li>
<li>Полудуплексный обмен: Данные могут передаваться в обоих направлениях, но не одновременно.</li>
<li>Без адресации: Мастер выбирает ведомое устройство с помощью линии SS.</li>
</ul>
<h2 id="2-настройка-обмена-данными-через-tinkercad">2. Настройка обмена данными через TinkerCAD<a class="td-heading-self-link" href="#2-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d0%be%d0%b1%d0%bc%d0%b5%d0%bd%d0%b0-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d0%bc%d0%b8-%d1%87%d0%b5%d1%80%d0%b5%d0%b7-tinkercad" aria-label="Heading self-link"></a></h2>
<h3 id="21-i2c">2.1 I2C<a class="td-heading-self-link" href="#21-i2c" aria-label="Heading self-link"></a></h3>
<p>В TinkerCAD была создана схема с двумя платами Arduino, соединенными по протоколу I2C. Использовались следующие компоненты:</p>
<ul>
<li>2 Arduino Uno</li>
<li>1 LCD-дисплей (I2C)</li>
<li>Соединительные провода</li>
</ul>
<h3 id="22-spi">2.2 SPI<a class="td-heading-self-link" href="#22-spi" aria-label="Heading self-link"></a></h3>
<p>В TinkerCAD была создана схема с двумя платами Arduino, соединенными по протоколу SPI. Использовались следующие компоненты:</p>
<ul>
<li>2 Arduino Uno</li>
<li>Соединительные провода</li>
</ul>
<h2 id="3-подсчет-комплектующих-и-пинов-для-киберполигона">3. Подсчет комплектующих и пинов для киберполигона<a class="td-heading-self-link" href="#3-%d0%bf%d0%be%d0%b4%d1%81%d1%87%d0%b5%d1%82-%d0%ba%d0%be%d0%bc%d0%bf%d0%bb%d0%b5%d0%ba%d1%82%d1%83%d1%8e%d1%89%d0%b8%d1%85-%d0%b8-%d0%bf%d0%b8%d0%bd%d0%be%d0%b2-%d0%b4%d0%bb%d1%8f-%d0%ba%d0%b8%d0%b1%d0%b5%d1%80%d0%bf%d0%be%d0%bb%d0%b8%d0%b3%d0%be%d0%bd%d0%b0" aria-label="Heading self-link"></a></h2>
<h3 id="31-комплектующие">3.1 Комплектующие<a class="td-heading-self-link" href="#31-%d0%ba%d0%be%d0%bc%d0%bf%d0%bb%d0%b5%d0%ba%d1%82%d1%83%d1%8e%d1%89%d0%b8%d0%b5" aria-label="Heading self-link"></a></h3>
<p>Для реализации проекта на киберполигонах необходимо учитывать следующие комплектующие:</p>
<ul>
<li>2 Arduino Uno</li>
<li>1 LCD-дисплей (I2C) или другие периферийные устройства</li>
<li>Соединительные провода</li>
<li>Резисторы и другие компоненты, если потребуется</li>
</ul>
<h3 id="32-пины">3.2 Пины<a class="td-heading-self-link" href="#32-%d0%bf%d0%b8%d0%bd%d1%8b" aria-label="Heading self-link"></a></h3>
<p>Для подключения компонентов необходимо использовать следующие пины:</p>
<ul>
<li>
<p>I2C:</p>
<ul>
<li>SDA (A4 на Arduino Uno)</li>
<li>SCL (A5 на Arduino Uno)</li>
</ul>
</li>
<li>
<p>SPI:</p>
<ul>
<li>MOSI (D11 на Arduino Uno)</li>
<li>MISO (D12 на Arduino Uno)</li>
<li>SCK (D13 на Arduino Uno)</li>
<li>SS (D10 на Arduino Uno, или любой другой пин, используемый для выбора ведомого устройства)</li>
</ul>
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e3a7839d75e97cb1c4618c680d19b461">2 - Отчёты Марка</h1>
    <div class="lead">Отчёты о работе Марка в проекте Киберполигон (сайт)</div>
	<h2 id="контакты">Контакты<a class="td-heading-self-link" href="#%d0%ba%d0%be%d0%bd%d1%82%d0%b0%d0%ba%d1%82%d1%8b" aria-label="Heading self-link"></a></h2>
<ul>
<li>
<p><a href="https://t.me/zertmark">Марк</a></p>
</li>
<li>
<p><a href="/site_for_practice/about_us/">О нас</a></p>
</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-7a626867f5e14b572246b166f31266c5">2.1 - Учимся Jinja</h1>
    <div class="lead">Использование библиотеки Jinja2</div>
	<h6 id="использование-библиотеки-jinja2"><strong>Использование библиотеки Jinja2</strong><a class="td-heading-self-link" href="#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b8%d0%b1%d0%bb%d0%b8%d0%be%d1%82%d0%b5%d0%ba%d0%b8-jinja2" aria-label="Heading self-link"></a></h6>
<h3 id="план"><strong>План:</strong><a class="td-heading-self-link" href="#%d0%bf%d0%bb%d0%b0%d0%bd" aria-label="Heading self-link"></a></h3>
<ul>
<li>
<ol>
<li>Цели и задачи</li>
</ol>
</li>
<li>
<ol start="2">
<li>Что такое Jinja ?</li>
</ol>
</li>
<li>
<ol start="3">
<li>Как установить ?</li>
</ol>
</li>
<li>
<ol start="4">
<li>Как пользоваться в Web-разработке ?</li>
</ol>
</li>
</ul>
<h3 id="цели-и-задачи"><strong>Цели и задачи</strong><a class="td-heading-self-link" href="#%d1%86%d0%b5%d0%bb%d0%b8-%d0%b8-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8" aria-label="Heading self-link"></a></h3>
<p>Изучить базовый функционал Jinja и протестировать полученные знания
с фреймворком Flask</p>
<h3 id="что-такое-jinja-"><strong>Что такое Jinja ?</strong><a class="td-heading-self-link" href="#%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-jinja-" aria-label="Heading self-link"></a></h3>
<p><strong>Jinja &ndash;</strong> это библиотека шаблонизатор, способная обрабатывать сложные
шаблоны с поддержкой разных конструкций. Используется для динамического
создания страниц на основе данных, полученных из баз данных (backend)</p>
<h3 id="установка"><strong>Установка:</strong><a class="td-heading-self-link" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0" aria-label="Heading self-link"></a></h3>
<p>Установка данной библиотеки производиться командой:</p>
<p>pip3 install Jinja2</p>
<p><strong>Базовый синтаксис шаблонов:</strong></p>
<p>{{ переменная }}</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">endif</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">block</span> <span style="color:#000">name_of_a_block</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">endblock</span> <span style="color:#000">name_of_a_block</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">iter</span> <span style="color:#000">in</span> <span style="color:#000">array</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">endfor</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Все значения переменных для парсинга передаются в виде словаря (или
наборов словарей):</p>
<p><strong>Пример с оценками:</strong></p>
<blockquote>
<p><strong>templates/template.txt</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#a40000">#</span> <span style="color:#000">templates</span><span style="color:#ce5c00;font-weight:bold">/</span><span style="color:#000">message</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">txt</span> <span style="color:#a40000">#</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">student</span> <span style="color:#000">in</span> <span style="color:#000">students</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{{</span> <span style="color:#000">student</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#000;font-weight:bold">}}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">student</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">score</span> <span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#0000cf;font-weight:bold">50</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Very</span> <span style="color:#000">good</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000">You</span> <span style="color:#000">passed</span> <span style="color:#000">the</span> <span style="color:#000">test</span> <span style="color:#ce5c00;font-weight:bold">!</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">You</span> <span style="color:#000">didn</span><span style="color:#a40000">&#39;</span><span style="color:#000">t</span> <span style="color:#000">pass</span> <span style="color:#000">the</span> <span style="color:#000">test</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">endif</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span><span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">endfor</span> <span style="color:#ce5c00;font-weight:bold">%</span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><blockquote>
<p><strong>main.py</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">jinja2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">students</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Alex&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#4e9a06">&#34;score&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">95</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;John&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#4e9a06">&#34;score&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">60</span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">en</span> <span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span><span style="color:#000">jinja2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Environment</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">loader</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">jinja2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FileSystemLoader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchpath</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;templates/&#34;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">template</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">en</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;message.txt&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">students</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">students</span><span style="color:#000;font-weight:bold">))</span>
</span></span></code></pre></div><p><strong>Вывод:</strong></p>
<pre tabindex="0"><code>Alex

Very good. You passed the test !

John

Very good. You passed the test !
</code></pre><h3 id="использование-jinja-в-web-разработке"><strong>Использование Jinja в Web-разработке</strong><a class="td-heading-self-link" href="#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-jinja-%d0%b2-web-%d1%80%d0%b0%d0%b7%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b5" aria-label="Heading self-link"></a></h3>
<p>Попробуем использовать Jinja2 совместно с Flask&rsquo;ом:</p>
<p>Установка Flask:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>python -m pip install flask
</span></span></code></pre></div><p><strong>Создание базового приложения на Flask:</strong></p>
<blockquote>
<p><strong>app.py</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Flask</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">app</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Flask</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">__name__</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@app.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">home</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;&lt;h1&gt;Basic app&lt;/h1&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">__name__</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;__main__&#34;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">debug</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/jinja/image1_hu_e4c8eb8940c9b4c4.png" width="600" height="300">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Результат работы

</p>
</figcaption>
</figure>

<p><strong>Теперь создадим несколько файлов:</strong></p>
<ul>
<li>
<p>base.html</p>
</li>
<li>
<p>database.py (для эмуляции работы базы данных)</p>
</li>
<li>
<p>results.txt (в папке data)</p>
</li>
</ul>
<blockquote>
<p><strong>Значения results.txt:</strong></p></blockquote>
<pre tabindex="0"><code>John: 84

Andrew: 20

Fin: 45

Stacy: 60
</code></pre><blockquote>
<p><strong>database.py:</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#000">_database_str</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">getDatabase</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">-&gt;</span> <span style="color:#204a87">list</span><span style="color:#000;font-weight:bold">[</span><span style="color:#204a87">dict</span><span style="color:#000;font-weight:bold">]:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">out</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">_database_str</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">_database_str</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">with</span> <span style="color:#204a87">open</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;../data/results.txt&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">file</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">line</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">file</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">readlines</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">name</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">score</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">line</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">strip</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">split</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;:&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">({</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#4e9a06">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">strip</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#4e9a06">&#34;score&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87">int</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">score</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">strip</span><span style="color:#000;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">out</span>
</span></span></code></pre></div><blockquote>
<p><strong>app.py</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Flask</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">jinja2</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Environment</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">FileSystemLoader</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">database</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">getDatabase</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">app</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Flask</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">__name__</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">template_env</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Environment</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">loader</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">FileSystemLoader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;../templates/&#34;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">results_template</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">template_env</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;base.html&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">max_score</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">100</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">title</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Results for grammar test&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@app.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/students/&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">students</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">students_with_scores</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getDatabase</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">students_with_scores</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;&lt;h1&gt;ERROR&lt;/h1&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">results_template</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">render</span><span style="color:#000;font-weight:bold">({</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#4e9a06">&#34;max_score&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">max_score</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">title</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;students&#34;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">students_with_scores</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@app.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">home</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;&lt;h1&gt;Basic app&lt;/h1&gt;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">__name__</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;__main__&#34;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">run</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">debug</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><blockquote>
<p><strong>base.html:</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{# templates/base.html #}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span> <span style="color:#c4a000">lang</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;en&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">meta</span> <span style="color:#c4a000">charset</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>{{ title }}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>{{ title }}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {% for student in students %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      {% if student.score &gt; 30 %}✅{% else %}❌{% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">em</span><span style="color:#000;font-weight:bold">&gt;</span>{{ student.name }}:<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">em</span><span style="color:#000;font-weight:bold">&gt;</span> {{ student.score }}/{{ max_score
</span></span><span style="display:flex;"><span>}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  {% endfor %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><!-- ![](./jinja/media/image2.png){width="6.496527777777778in"
height="3.170138888888889in"} -->
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/jinja/image2_hu_4f313b60369bbe8d.png" width="600" height="300">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Результат работы нашего приложения Flask

</p>
</figcaption>
</figure>

<h3 id="вывод">Вывод:<a class="td-heading-self-link" href="#%d0%b2%d1%8b%d0%b2%d0%be%d0%b4" aria-label="Heading self-link"></a></h3>
<p>Jinja2 позволяет динамично изменять и генерировать статические страницы,
что мы и проделали в данной работе</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ee1e9f8b457c14056591019ec8e185df">2.2 - Git и Flask</h1>
    <div class="lead">Отчёт по установке Github-репозитория CyberPolygon-front и создания базового проекта на Flask</div>
	<p>241-329 Пашковский</p>
<p><strong>Отчёт по установке Github-репозитория CyberPolygon-front и создания
базового проекта на Flask</strong>


<div class="pageinfo pageinfo-primary">
<p><strong>GitHub</strong> &ndash; это облачная платформа для хостинга и разработки программного
обеспечения. На ней можно хранить проекты в репозиториях, управлять
версиями кода и работать вместе с другими программистами.
<strong>Git</strong> &ndash; распределённая система управления версиями</p>

</div>
</p>
<h2 id="часть-1-базовая-работа-с-git">Часть 1. Базовая работа с Git:<a class="td-heading-self-link" href="#%d1%87%d0%b0%d1%81%d1%82%d1%8c-1-%d0%b1%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-git" aria-label="Heading self-link"></a></h2>
<h3 id="установка-git">Установка git:<a class="td-heading-self-link" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-git" aria-label="Heading self-link"></a></h3>
<p>Скачиваем установщик git для Wind   ows с официального сайта и
устанавливаем его:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 946px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image1_hu_1d719c1f446d5f2c.png" width="936" height="542">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 1

</p>
</figcaption>
</figure>

<p>Проверяем установку:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 642px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image2_hu_f63dd27442150e0d.png" width="632" height="141">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 2

</p>
</figcaption>
</figure>

<p>Git успешно установлен</p>
<p><strong>Опционально, но более чем желательно зайти в собственный Github
профиль при помощи RSA ключа</strong></p>
<h3 id="скачивание-и-настройка-репозитория">Скачивание и настройка репозитория:<a class="td-heading-self-link" href="#%d1%81%d0%ba%d0%b0%d1%87%d0%b8%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f" aria-label="Heading self-link"></a></h3>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 935px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image3_hu_6aee2975dd8d1603.png" width="925" height="261">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 3 - скачивание репозитория

</p>
</figcaption>
</figure>

<p>Следуем инструкциям по установке всех зависимостей:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1130px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image4_hu_88f8f6ddd864d992.png" width="1120" height="435">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 4 - инструкции по установке проекта cyberpolygon-front

</p>
</figcaption>
</figure>

<p>Устанавливаем NodeJS с официального сайта:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1064px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image5_hu_1120aec4fd36cf4c.png" width="1054" height="694">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 5 - официальный сайт NodeJS

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1121px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image6_hu_8789b52a4fe8f0fe.png" width="1111" height="1080">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 6 - установка зависимостей проекта

</p>
</figcaption>
</figure>

<p>У меня не удалось запустить проект нативно, поэтому я собрал и запустил
контейнер, прилагаемый к проекту:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 946px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image7_hu_f471a27b2ae05bd5.png" width="936" height="288">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 7 - запуск контейнера

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1114px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image8_hu_8a3b045290a9095e.png" width="1104" height="954">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 8 - успешная работа сайта с локального хоста

</p>
</figcaption>
</figure>

<h2 id="часть-2-проект-на-flask">Часть 2: проект на Flask<a class="td-heading-self-link" href="#%d1%87%d0%b0%d1%81%d1%82%d1%8c-2-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82-%d0%bd%d0%b0-flask" aria-label="Heading self-link"></a></h2>
<h3 id="создание-проекта-на-flask">Создание проекта на Flask<a class="td-heading-self-link" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b0-%d0%bd%d0%b0-flask" aria-label="Heading self-link"></a></h3>
<p>Создаём директорию, виртуальное окружение и активируем его:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 744px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image9_hu_13796a86b5bf2917.png" width="734" height="694">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 9 - настройка рабочей директории проекта Flask

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 948px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image10_hu_f5500f9d5b287646.png" width="938" height="458">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 10 - установка (на этом скриншоте - проверка) всех зависимостей

</p>
</figcaption>
</figure>

<p>Напишем базовый код:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">os</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Flask</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">create_app</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">test_config</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#8f5902;font-style:italic"># create and configure the app*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Flask</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">__name__</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">instance_relative_config</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">from_mapping</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">SECRET_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;dev&#39;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">DATABASE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;localhost:./database/flaskr.fdb&#39;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">USER</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;sysdba&#39;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;masterkey&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">test_config</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">from_pyfile</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;config.py&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">silent</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">from_mapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">test_config</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">try</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">makedirs</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">instance_path</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">OSError</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">hello</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#39;Hello, World!&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">app</span>
</span></span></code></pre></div><figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1927px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image11_hu_5bc07e2738d07589.png" width="1917" height="1078">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 11 - результат работы базового кода в __init__.py

</p>
</figcaption>
</figure>

<p>Добавим поддержку базы данных, используя следующий код:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">fdb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">click</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">current_app</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">g</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask.cli</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">with_appcontext</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">init_db</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">try</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">conn</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">fdb</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">connect</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">dsn</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;DATABASE&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;USER&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;PASSWORD&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">fb_library_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;LIBRARY&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">conn</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">drop_database</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">except</span> <span style="color:#c00;font-weight:bold">Exception</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">e</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">e</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">conn</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">fdb</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create_database</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">dsn</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;DATABASE&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;USER&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;PASSWORD&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">fb_library_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;LIBRARY&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">metadata</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        RECREATE TABLE users (
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            id integer generated by default as identity primary key,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            username varchar(256) UNIQUE NOT NULL,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            password varchar(256) NOT NULL
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        )
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        &#39;&#39;&#39;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        RECREATE TABLE posts (
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            id integer generated by default as identity primary key,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            author_id INTEGER NOT NULL REFERENCES users (id),
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            created TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            title varchar(120) NOT NULL,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">            body varchar(5000) NOT NULL
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        )
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">        &#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">cursor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">conn</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cursor</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">query</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">metadata</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">cursor</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">execute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">query</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">conn</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">commit</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">get_db</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#4e9a06">&#39;db&#39;</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">g</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">g</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">db</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">fdb</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">connect</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">dsn</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;DATABASE&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;USER&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;PASSWORD&#39;</span><span style="color:#000;font-weight:bold">],</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">fb_library_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">current_app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;LIBRARY&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">g</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">close_db</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">db</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">g</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pop</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;db&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">db</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">close</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@click.command</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;init-db&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@with_appcontext</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">init_db_command</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#4e9a06">&#34;&#34;&#34;Clear the existing data and create new tables.&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">init_db</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">click</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">echo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;Initialized the database.&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">init_app</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">app</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">teardown_appcontext</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">close_db</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cli</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">add_command</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">init_db_command</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>Меняем код в <code>__init__.py</code>, добавляя одну строку в функцию
<code>create_app</code>:</p>
<p>Добавляем следующую строчку в функцию <code>create_app</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">init_app</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">app</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>Инициализируем базу данных с именем test:
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 731px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image12_hu_c0a373bd01aacab4.png" width="721" height="66">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 12 - инициализация базы данных

</p>
</figcaption>
</figure>
</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 731px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image12_hu_c0a373bd01aacab4.png" width="721" height="66">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 13 - результат создания базы данных

</p>
</figcaption>
</figure>

<h3 id="создание-эскиза">Создание эскиза<a class="td-heading-self-link" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%8d%d1%81%d0%ba%d0%b8%d0%b7%d0%b0" aria-label="Heading self-link"></a></h3>
<p>Сделаем модуль аутентификации auth.py:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">functools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Blueprint</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">flash</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">g</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">render_template</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">session</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000">url_for</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">werkzeug.security</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">check_password_hash</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000">generate_password_hash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flaskr.db</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">get_db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">bp</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Blueprint</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">__name__</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">url_prefix</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;/auth&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>Добавим код для регистрации:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@bp.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/register&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">methods</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;GET&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">register</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">username</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;username&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">password</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;password&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">db</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_db</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">username</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Username is required.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">password</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Password is required.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">error</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">try</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cursor</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">execute</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#4e9a06">&#34;INSERT INTO users (username, password) VALUES (?,</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">?</span><span style="color:#000;font-weight:bold">)</span><span style="color:#4e9a06">&#34;,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">generate_password_hash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">password</span><span style="color:#000;font-weight:bold">)),</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">commit</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">except</span> <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DatabaseError</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">e</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">args</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#0000cf;font-weight:bold">335544665</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#8f5902;font-style:italic">#isc_unique_key_violation*</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#34;User </span><span style="color:#4e9a06">{</span><span style="color:#000">username</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> is already registered.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url_for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;auth.login&#34;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">flash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">error</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth/register.html&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><blockquote>
<p><strong>Итоговый код auth.py:</strong></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">functools</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flask</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Blueprint</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">flash</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">g</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">render_template</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">session</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000">url_for</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">werkzeug.security</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">check_password_hash</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000">generate_password_hash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">flaskr.db</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">get_db</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">bp</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Blueprint</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">__name__</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">url_prefix</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;/auth&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@bp.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/register&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">methods</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;GET&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">register</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">username</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;username&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">password</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;password&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">db</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_db</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">username</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Username is required.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">password</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Password is required.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">error</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">try</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cursor</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">execute</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#4e9a06">&#34;INSERT INTO users (username, password) VALUES (?,</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">?</span><span style="color:#000;font-weight:bold">)</span><span style="color:#4e9a06">&#34;,</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">generate_password_hash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">password</span><span style="color:#000;font-weight:bold">)),</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">commit</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">except</span> <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DatabaseError</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">e</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">args</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#0000cf;font-weight:bold">335544665</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#34;User </span><span style="color:#4e9a06">{</span><span style="color:#000">username</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> is already registered.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url_for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;auth.login&#34;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">flash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">error</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth/register.html&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@bp.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/login&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">methods</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;GET&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">login</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">username</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;username&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">password</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">form</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;password&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">db</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_db</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">user</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">db</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cursor</span><span style="color:#000;font-weight:bold">()</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">execute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;SELECT * FROM users WHERE username</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#a40000">?</span><span style="color:#4e9a06">&#39;, (username,) ).fetchonemap()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">user</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Incorrect username.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">check_password_hash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">user</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;password&#39;</span><span style="color:#000;font-weight:bold">],</span> <span style="color:#000">password</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">error</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Incorrect password.&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">error</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">session</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">clear</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">session</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;user_id&#39;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">user</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;id&#39;</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url_for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;index&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">flash</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">error</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth/login.html&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#5c35cc;font-weight:bold">@bp.route</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/logout&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">logout</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">session</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">clear</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url_for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;index&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">login_required</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">view</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#5c35cc;font-weight:bold">@functools.wraps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">view</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">wrapped_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">kwargs</span><span style="color:#000;font-weight:bold">):</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">g</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span><span style="color:#000;font-weight:bold">:</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url_for</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;auth.login&#39;</span><span style="color:#000;font-weight:bold">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">**</span><span style="color:#000">kwargs</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">wrapped_view</span>
</span></span></code></pre></div><h2 id="создадим-шаблоны">Создадим шаблоны:<a class="td-heading-self-link" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%b4%d0%b8%d0%bc-%d1%88%d0%b0%d0%b1%d0%bb%d0%be%d0%bd%d1%8b" aria-label="Heading self-link"></a></h2>
<blockquote>
<p>base.html:</p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">&lt;!doctype html&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>{% block title %}{% endblock %} - Flaskr<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">link</span> <span style="color:#c4a000">rel</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;stylesheet&#34;</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ url_for(&#39;static&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">filename=&#39;style.css&#39;) }}&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">nav</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>Flaskr<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {% if g.user %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">span</span><span style="color:#000;font-weight:bold">&gt;</span>{{ g.user[&#39;username&#39;] }}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">span</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ url_for(&#39;auth.logout&#39;) }}&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Log Out<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {% else %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ url_for(&#39;auth.register&#39;) }}&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Register<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ url_for(&#39;auth.login&#39;) }}&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Log In<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {% endif %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">nav</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">section</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;content&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    {% block header %}{% endblock %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% for message in get_flashed_messages() %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;flash&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>{{ message }}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endfor %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block content %}{% endblock %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">section</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><blockquote>
<p>register.html</p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block header %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>{% block title %}Register{% endblock %}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Username<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span> <span style="color:#c4a000">required</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Password<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#c4a000">required</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Register&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span></code></pre></div><blockquote>
<p>login.html:</p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{% extends &#39;base.html&#39; %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block header %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>{% block title %}Log In{% endblock %}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% block content %}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Username<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;username&#34;</span> <span style="color:#c4a000">required</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Password<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;password&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#c4a000">required</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Log In&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{% endblock %}
</span></span></code></pre></div><p>Получим результат:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 903px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/git_and_flask/image14_hu_54b048e6dc42d67a.png" width="893" height="1080">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 14 - реализован вход в наше приложение

</p>
</figcaption>
</figure>

<p>Вывод:</p>
<p>Скачан, собран и запущен репозиторий cyberpolygon-front, сделан простая
форма входа и регистрации пользователя на Flask</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6e629a5eca852332f879d818eb129c63">2.3 - Знакомство с Docker Compose</h1>
    <div class="lead">Знакомимся с технологией для одновременного управления нескольких контейнеров</div>
	<h6 id="знакомство-с-docker-compose"><strong>Знакомство с Docker Compose</strong><a class="td-heading-self-link" href="#%d0%b7%d0%bd%d0%b0%d0%ba%d0%be%d0%bc%d1%81%d1%82%d0%b2%d0%be-%d1%81-docker-compose" aria-label="Heading self-link"></a></h6>
<h3 id="1-что-такое-docker-compose-"><strong>1. Что такое Docker Compose ?</strong><a class="td-heading-self-link" href="#1-%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-docker-compose-" aria-label="Heading self-link"></a></h3>
<p>Docker Compose &mdash; это мощный инструмент, позволяющий очень быстро
развёртывать приложения, отличающиеся сложной архитектурой. Если Docker
оперирует отдельными контейнерами, то Docker Compose оперирует уже
набором контейнеров, т.е. есть сервисов.</p>
<h3 id="2-создание-проекта-для-docker-compose"><strong>2. Создание проекта для Docker Compose</strong><a class="td-heading-self-link" href="#2-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b0-%d0%b4%d0%bb%d1%8f-docker-compose" aria-label="Heading self-link"></a></h3>
<h5 id="21-создадим-базовый-проект-для-демонстрации-функций-docker-compose"><strong>2.1 Создадим базовый проект, для демонстрации функций docker compose</strong><a class="td-heading-self-link" href="#21-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%b4%d0%b8%d0%bc-%d0%b1%d0%b0%d0%b7%d0%be%d0%b2%d1%8b%d0%b9-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82-%d0%b4%d0%bb%d1%8f-%d0%b4%d0%b5%d0%bc%d0%be%d0%bd%d1%81%d1%82%d1%80%d0%b0%d1%86%d0%b8%d0%b8-%d1%84%d1%83%d0%bd%d0%ba%d1%86%d0%b8%d0%b9-docker-compose" aria-label="Heading self-link"></a></h5>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 456px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image1_hu_31ea3c646dc77ea2.png" width="446" height="223">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 1 - строение базового проекта

</p>
</figcaption>
</figure>

<p>Содержимое файла Dockerfile в папках client и server будут отличаться
только названием python файлов, которые мы добавляем и, в случае с
Dockerfile&rsquo;а в папке server &ndash; мы также добавляем файл <code>index.html</code>:</p>
<blockquote>
<p>DockerFile client</p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">FROM</span><span style="color:#4e9a06"> python:3</span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">WORKDIR</span><span style="color:#4e9a06"> /client/</span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">ADD</span> client.py .<span style="color:#a40000">
</span></span></span></code></pre></div><blockquote>
<p><em>DockerFile server</em></p></blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">FROM</span><span style="color:#4e9a06"> python:3</span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">WORKDIR</span><span style="color:#4e9a06"> /server/</span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">ADD</span> server.py .<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#204a87;font-weight:bold">ADD</span> index.html .<span style="color:#a40000">
</span></span></span></code></pre></div><p>Создаём файл <code>docker-compose.yaml</code> и указываем в качестве сервисов наши
<code>server</code> и <code>client</code> и соответствующие им папки:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-docker" data-lang="docker"><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3&#34;</span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>services:<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>  server:<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    build: server/<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    command: python ./server.py<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    ports:<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>      - 4444:4444<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>  client:<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    build: client/<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    command: python ./client.py<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    network_mode: host<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>    depends_on:<span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>      - server<span style="color:#a40000">
</span></span></span></code></pre></div><h5 id="22-соберём-наш-проект"><strong>2.2 Соберём наш проект</strong><a class="td-heading-self-link" href="#22-%d1%81%d0%be%d0%b1%d0%b5%d1%80%d1%91%d0%bc-%d0%bd%d0%b0%d1%88-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82" aria-label="Heading self-link"></a></h5>
<p>Вводим команду: <code>docker-compose build</code></p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1401px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image2_hu_89eabc05621f38b.png" width="1391" height="1016">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 2 - Сборка всего проекта одной командой docker-compose build

</p>
</figcaption>
</figure>

<p>Проверим наши собранные образы командой <code>docker images</code>:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image3_hu_6333063c387ee3c9.png" width="600" height="75">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 3 - проверка собранных образов Docker

</p>
</figcaption>
</figure>

<p>Как видно на рисунке 3 - оба наших образа успешно собрались. Теперь
давайте их запустим, проверим их работоспособность.</p>
<p>Сделать это можно также при помощи Docker Compose, а именно при помощи
команды <code>docker-compose up</code>:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1844px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image4_hu_398bc70e6206aeb3.png" width="1834" height="1041">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 4 - запуск всех контейнеров

</p>
</figcaption>
</figure>

<p>Результат запуска и работы контейнеров успешен (клиент успешно выводит
содержимое index.html, полученный с сервера):</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 626px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image5_hu_66de0293d80e084b.png" width="616" height="800">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 5 - вывод «клиента» полученных данных от «сервера»

</p>
</figcaption>
</figure>

<p>Можно также заметить, что «клиент» отключается (возвращает ноль) в
выводе команды docker-compose, что означает, что контейнер завершил свою
работу. Проверим это:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1450px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image6_hu_f6391024f9456c07.png" width="1440" height="79">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 6 - работа только одного контейнера «сервер»

</p>
</figcaption>
</figure>

<p>Также сверим результат вывода «клиента» контейнера с оригинальным
файлом:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1667px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image7_hu_2b6a59f946918608.png" width="1657" height="966">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 7 - проверка правильности чтения файла index.html

</p>
</figcaption>
</figure>

<h3 id="3-применим-наши-новые-навыки-для-сборки-новой-версий-cyberpolygon"><strong>3. Применим наши новые навыки для сборки новой версий Cyberpolygon</strong><a class="td-heading-self-link" href="#3-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d0%bd%d0%b8%d0%bc-%d0%bd%d0%b0%d1%88%d0%b8-%d0%bd%d0%be%d0%b2%d1%8b%d0%b5-%d0%bd%d0%b0%d0%b2%d1%8b%d0%ba%d0%b8-%d0%b4%d0%bb%d1%8f-%d1%81%d0%b1%d0%be%d1%80%d0%ba%d0%b8-%d0%bd%d0%be%d0%b2%d0%be%d0%b9-%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%b9-cyberpolygon" aria-label="Heading self-link"></a></h3>
<h5 id="31-в-новой-версии-cyberpolygon-был-добавлен-docker-compose-рисунки-8-10"><strong>3.1 В новой версии Cyberpolygon был добавлен Docker Compose (рисунки 8-10):</strong><a class="td-heading-self-link" href="#31-%d0%b2-%d0%bd%d0%be%d0%b2%d0%be%d0%b9-%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%b8-cyberpolygon-%d0%b1%d1%8b%d0%bb-%d0%b4%d0%be%d0%b1%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd-docker-compose-%d1%80%d0%b8%d1%81%d1%83%d0%bd%d0%ba%d0%b8-8-10" aria-label="Heading self-link"></a></h5>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1930px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image8_hu_66fab391230478c5.png" width="1920" height="1080">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 8 - начало сборки

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1930px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image9_hu_5eef3b34919bfb66.png" width="1920" height="1080">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 9 - сборка успешно завершена

</p>
</figcaption>
</figure>

<p>Запустим контейнеры командой docker-compose up и зайдём на
localhost:8000</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1930px">
<img class="card-img-top" src="/site_for_practice/docs/mark_reports/docker/image10_hu_301e2615d3892693.png" width="1920" height="978">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Рисунок 10 - успешный запуск контейнеров для сайта Cyberpolygon'а

</p>
</figcaption>
</figure>

<h3 id="вывод"><strong>Вывод</strong><a class="td-heading-self-link" href="#%d0%b2%d1%8b%d0%b2%d0%be%d0%b4" aria-label="Heading self-link"></a></h3>
<p>Мы узнали: что такое docker-composer, его базовые настройки и способы
применения и успешно запустили тестовый проект и проект Cyberpolygon</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f8918f697450c2009b75913f9e9317a5">3 - Задачи</h1>
    
	<h1 id="проектные-задачи">Проектные задачи<a class="td-heading-self-link" href="#%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%bd%d1%8b%d0%b5-%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8" aria-label="Heading self-link"></a></h1>
<h2 id="задачи-эльдара">Задачи Эльдара<a class="td-heading-self-link" href="#%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8-%d1%8d%d0%bb%d1%8c%d0%b4%d0%b0%d1%80%d0%b0" aria-label="Heading self-link"></a></h2>
<h3 id="1-изучение-i2c-и-spi-протоколов-в-arduino">1. Изучение I2C и SPI протоколов в Arduino<a class="td-heading-self-link" href="#1-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-i2c-%d0%b8-spi-%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb%d0%be%d0%b2-%d0%b2-arduino" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Соколов Никита</li>
<li><strong>Ответственный</strong>: Журавлев Эльдар</li>
<li><strong>Описание</strong>: Настроить обмен данными по протоколам I2C и SPI между двумя Arduino с помощью TinkerCAD, подготовить рабочий прототип.</li>
<li><strong>Период</strong>: 07.04 — 14.04</li>
</ul>
<h3 id="2-анализ-выбранных-эффектов-по-документу">2. Анализ выбранных эффектов по документу<a class="td-heading-self-link" href="#2-%d0%b0%d0%bd%d0%b0%d0%bb%d0%b8%d0%b7-%d0%b2%d1%8b%d0%b1%d1%80%d0%b0%d0%bd%d0%bd%d1%8b%d1%85-%d1%8d%d1%84%d1%84%d0%b5%d0%ba%d1%82%d0%be%d0%b2-%d0%bf%d0%be-%d0%b4%d0%be%d0%ba%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d1%83" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Соколов Никита</li>
<li><strong>Ответственный</strong>: Журавлев Эльдар</li>
<li><strong>Описание</strong>: Для каждого эффекта найти информацию о том, как его управлять: сколько пинов нужно, есть ли аналоговые входы, нужны ли дополнительные батареи для питания.</li>
<li><strong>Период</strong>: 17.02 — 24.02</li>
</ul>
<h3 id="3-создание-физического-макета">3. Создание физического макета<a class="td-heading-self-link" href="#3-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%84%d0%b8%d0%b7%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d0%bc%d0%b0%d0%ba%d0%b5%d1%82%d0%b0" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Соколов Никита</li>
<li><strong>Ответственный</strong>: Журавлев Эльдар</li>
<li><strong>Описание</strong>: Сделать физический макет проекта, используя компоненты Arduino и другие детали.</li>
<li><strong>Период</strong>: 12.05 — 01.06</li>
</ul>
<hr>
<h2 id="задачи-марка">Задачи Марка<a class="td-heading-self-link" href="#%d0%b7%d0%b0%d0%b4%d0%b0%d1%87%d0%b8-%d0%bc%d0%b0%d1%80%d0%ba%d0%b0" aria-label="Heading self-link"></a></h2>
<h3 id="4-изучение-работы-jinja-flask">4. Изучение работы Jinja (Flask)<a class="td-heading-self-link" href="#4-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-jinja-flask" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Давыдов Денис Михайлович</li>
<li><strong>Ответственный</strong>: Пашковский Марк Анатольевич</li>
<li><strong>Описание</strong>: Освоение шаблонизатора Jinja для работы с Flask, создание динамических веб-страниц и шаблонов.</li>
<li><strong>Период</strong>: 05.04 — 07.04</li>
</ul>
<h3 id="5-изучение-базовой-работы-git-и-flask">5. Изучение базовой работы Git и Flask<a class="td-heading-self-link" href="#5-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b0%d0%b7%d0%be%d0%b2%d0%be%d0%b9-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-git-%d0%b8-flask" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Давыдов Денис Михайлович</li>
<li><strong>Ответственный</strong>: Пашковский Марк Анатольевич</li>
<li><strong>Описание</strong>: Ознакомление с системой контроля версий Git и основами разработки на Flask для создания веб-приложений.</li>
<li><strong>Период</strong>: 07.04 — 14.04</li>
</ul>
<h3 id="6-изучение-docker-compose">6. Изучение Docker-Compose<a class="td-heading-self-link" href="#6-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-docker-compose" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Давыдов Денис Михайлович</li>
<li><strong>Ответственный</strong>: Пашковский Марк Анатольевич</li>
<li><strong>Описание</strong>: Изучение инструмента Docker-Compose для оркестрации многоконтейнерных приложений.</li>
<li><strong>Период</strong>: 14.04 — 21.04</li>
</ul>
<h3 id="7-изучение-работы-docker">7. Изучение работы Docker<a class="td-heading-self-link" href="#7-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-docker" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Давыдов Денис Михайлович</li>
<li><strong>Ответственный</strong>: Пашковский Марк Анатольевич</li>
<li><strong>Описание</strong>: Ознакомление с Docker для контейнеризации приложений и их развертывания.</li>
<li><strong>Период</strong>: 21.04 — 28.04</li>
</ul>
<h3 id="8-использование-полученных-знаний-для-изучения-работы-репозитория-cyberpolygon">8. Использование полученных знаний для изучения работы репозитория Cyberpolygon<a class="td-heading-self-link" href="#8-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b5%d0%bd%d0%bd%d1%8b%d1%85-%d0%b7%d0%bd%d0%b0%d0%bd%d0%b8%d0%b9-%d0%b4%d0%bb%d1%8f-%d0%b8%d0%b7%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d1%8f-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d1%8b-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f-cyberpolygon" aria-label="Heading self-link"></a></h3>
<ul>
<li><strong>Куратор</strong>: Давыдов Денис Михайлович</li>
<li><strong>Ответственный</strong>: Пашковский Марк Анатольевич</li>
<li><strong>Описание</strong>: Практическое применение изученных технологий на проекте Cyberpolygon, анализ и работа с репозиторием.</li>
<li><strong>Период</strong>: 28.04 — 05.05</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Ссылка на GitHub Cyberpoligon" aria-label="Ссылка на GitHub Cyberpoligon">
    <a target="_blank" rel="noopener" href="https://github.com/cyberpolygon2024" aria-label="Ссылка на GitHub Cyberpoligon">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Ссылка наш GitHub" aria-label="Ссылка наш GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/zertmark/practice-2025-1" aria-label="Ссылка наш GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025&ndash;2025
    <span class="td-footer__authors">Zertmark &amp; Skeatlox</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/site_for_practice/js/main.min.420d1481d2b700ad5265bea8d92732e0d89c1ff8c3fc18e724670b8cf2b18362.js" integrity="sha256-Qg0UgdK3AK1SZb6o2Scy4NicH/jD/BjnJGcLjPKxg2I=" crossorigin="anonymous"></script>
<script defer src="/site_for_practice/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/site_for_practice/js/tabpane-persist.js'></script>

  </body>
</html>
